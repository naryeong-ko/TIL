ê·€ì—¬ìš´ ê³ ì–‘ì´ë‚˜ ë¬´ì§€ê°œëŠ” ë ˆìŠ¨ 3ì— ì—†ì–´!

ë¼ê³  ì‹œì‘ ì „ì— ê²½ê³  ë°›ì•˜ë‹¤ğŸ™€

## ì»¨íŠ¸ë™íŠ¸ì˜ ë¶ˆë³€ì„±

ì´ë”ë¦¬ì›€ì— ì»¨íŠ¸ë™íŠ¸ë¥¼ ë°°í¬í•˜ê³  ë‚˜ë©´, ì»¨íŠ¸ë™íŠ¸ëŠ”Â **ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤(Immutable)**.(ìˆ˜ì •/ì—…ë°ì´íŠ¸ ë¶ˆê°€)

## ì™¸ë¶€ ì˜ì¡´ì„±

ë²„ê·¸ë¡œ ì¸í•´ ì»¨íŠ¸ë ‰íŠ¸ì— ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— DAppì˜ ì¤‘ìš”í•œ ì¼ë¶€ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë†“ëŠ” ê²ƒì´ í•©ë¦¬ì ì´ë‹¤.

ex. DAppì— í¬ë¦½í† í‚¤í‹° ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œë¥¼ ì§ì ‘ ì¨ë„£ëŠ” ê²ƒ ëŒ€ì‹ , ì–¸ì  ê°€ í¬ë¦½í† í‚¤í‹° ì»¨íŠ¸ë™íŠ¸ì— ë¬¸ì œê°€ ìƒê¸°ë©´ í•´ë‹¹ ì£¼ì†Œë¥¼ ë°”ê¿€ ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ”Â `setKittyContractAddress`Â í•¨ìˆ˜ ë§Œë“¤ê¸°

<aside>
â­ ì‹¤ìŠµ

ë ˆìŠ¨ 2ì—ì„œ ìš°ë¦¬ê°€ ë§Œë“  ì½”ë“œë¥¼ í¬ë¦½í† í‚¤í‹° ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œì˜ ì—…ë°ì´íŠ¸ê°€ ê°€ëŠ¥í•˜ë„ë¡ ë°”ê¿”ë³´ì„¸.

1. ìš°ë¦¬ê°€ ì§ì ‘ ì£¼ì†Œë¥¼ ì¨ë„£ì—ˆë˜Â `ckAddress`ê°€ ìˆëŠ” ì¤„ì„ ì§€ìš°ê²Œ.
2. ìš°ë¦¬ê°€Â `kittyContract`ë¥¼ ìƒì„±í–ˆë˜ ì¤„ì„ ë³€ìˆ˜ ì„ ì–¸ë§Œ í•˜ë„ë¡ ë³€ê²½í•˜ê²Œ - ì–´ë–¤ ê²ƒë„ ëŒ€ì…ì„ í•˜ì§€ ì•Šë„ë¡ í•˜ê²Œ.
3. `setKittyContractAddress`ë¼ëŠ” ì´ë¦„ì˜ í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ê²Œ. ì´ í•¨ìˆ˜ëŠ”Â `address`Â íƒ€ì…ì˜ ë³€ìˆ˜Â `_address`ë¥¼ í•˜ë‚˜ì˜ ì¸ìë¡œ ë°›ê³ ,Â `external`Â í•¨ìˆ˜ì—¬ì•¼ í•˜ë„¤.
4. í•¨ìˆ˜ ë‚´ì—ì„œ,Â `kittyContract`ì—Â `KittyInterface(_address)`ë¥¼ ëŒ€ì…í•˜ëŠ” í•œ ì¤„ì˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ê²Œ.

> ì°¸ê³ : ìë„¤ê°€ ì´ í•¨ìˆ˜ì—ì„œ ë³´ì•ˆ ì·¨ì•½ì ì„ ë°œê²¬í–ˆë”ë¼ë„, ê±±ì •í•˜ì§€ ë§ê²Œ - ìš°ë¦° ë‹¤ìŒ ì±•í„°ì—ì„œ ê·¸ê±¸ ê³ ì¹  ê²ƒì´ë„¤ ;)
> 

```solidity
pragma solidity ^0.4.19;

import "./zombiefactory.sol";

contract KittyInterface {
  function getKitty(uint256 _id) external view returns (
    bool isGestating,
    bool isReady,
    uint256 cooldownIndex,
    uint256 nextActionAt,
    uint256 siringWithId,
    uint256 birthTime,
    uint256 matronId,
    uint256 sireId,
    uint256 generation,
    uint256 genes
  );
}

contract ZombieFeeding is ZombieFactory {

  // 1. ì´ ì¤„ì„ ì§€ìš°ê²Œ:
  
  // 2. ì—¬ê¸°ì„œ ëŒ€ì…ì„ ë¹¼ê³  ê·¸ëƒ¥ ì„ ì–¸ìœ¼ë¡œ ë°”ê¾¸ê²Œ:
  KittyInterface kittyContract;

  // 3. ì—¬ê¸° setKittyContractAddress ë©”ì†Œë“œë¥¼ ì¶”ê°€í•˜ê²Œ
  function setKittyContractAddress(address _address) external {
    kittyContract = KittyInterface(_address);
  }

  function feedAndMultiply(uint _zombieId, uint _targetDna, string _species) public {
    require(msg.sender == zombieToOwner[_zombieId]);
    Zombie storage myZombie = zombies[_zombieId];
    _targetDna = _targetDna % dnaModulus;
    uint newDna = (myZombie.dna + _targetDna) / 2;
    if (keccak256(_species) == keccak256("kitty")) {
      newDna = newDna - newDna % 100 + 99;
    }
    _createZombie("NoName", newDna);
  }

  function feedOnKitty(uint _zombieId, uint _kittyId) public {
    uint kittyDna;
    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);
    feedAndMultiply(_zombieId, kittyDna, "kitty");
  }

}

```

### ë³´ì•ˆ ì·¨ì•½ì 

`setKittyContractAddress`Â í•¨ìˆ˜ëŠ”Â `external`ì´ë¼, ëˆ„êµ¬ë“  ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

ë”°ë¼ì„œ ì•„ë¬´ë‚˜ ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ í¬ë¦½íŠ¸í‚¤í‹° ì»¨íŠ¸ë™íŠ¸ì˜ ì£¼ì†Œë¥¼ ë°”ê¿€ ìˆ˜ ìˆë‹¤.

</aside>

## ì†Œìœ  ê°€ëŠ¥í•œ ì»¨íŠ¸ë™íŠ¸

### `Ownable`Â ì»¨íŠ¸ë™íŠ¸

OpenZeppelinÂ ì†”ë¦¬ë””í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜Â `Ownable`Â ì»¨íŠ¸ë™íŠ¸.

```solidity
/**
 * @title Ownable
 * @dev The Ownable contract has an owner address, and provides basic authorization control
 * functions, this simplifies the implementation of "user permissions".
 */
contract Ownable {
  address public owner;
  event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);

/**
   * @dev The Ownable constructor sets the original `owner` of the contract to the sender
   * account.
   */
	function Ownable() public {
    owner = msg.sender;
	}

/**
   * @dev Throws if called by any account other than the owner.
   */
	modifier onlyOwner() {
    require(msg.sender == owner);
    _;
  }

/**
   * @dev Allows the current owner to transfer control of the contract to a newOwner.
   * @param newOwner The address to transfer ownership to.
   */
	function transferOwnership(address newOwner) public onlyOwner {
    require(newOwner != address(0));
    OwnershipTransferred(owner, newOwner);
    owner = newOwner;
  }
}

```

### ìƒì„±ì(Constructor)

- ì»¨íŠ¸ë™íŠ¸ì™€ ë™ì¼í•œ ì´ë¦„ì„ ê°€ì§„,ìƒëµí•  ìˆ˜ ìˆëŠ” íŠ¹ë³„í•œ í•¨ìˆ˜ì´ë‹¤.
- ì»¨íŠ¸ë™íŠ¸ê°€ ìƒì„±ë  ë•Œ ë”± í•œ ë²ˆë§Œ ì‹¤í–‰ëœë‹¤.
- ìœ„ ì½”ë“œì—ì„œëŠ” Â `function Ownable()`

### í•¨ìˆ˜ ì œì–´ì(Function Modifier)

- ì œì–´ìëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë“¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œì–´í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì¼ì¢…ì˜ ìœ ì‚¬ í•¨ìˆ˜ì´ë‹¤.
- ë³´í†µ í•¨ìˆ˜ ì‹¤í–‰ ì „ì˜ ìš”êµ¬ì‚¬í•­ ì¶©ì¡± ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ë°ì— ì‚¬ìš©í•œë‹¤.
- `onlyOwner`ì˜ ê²½ìš°ì—ëŠ” ì ‘ê·¼ì„ ì œí•œí•´ì„œÂ **ì˜¤ì§**Â ì»¨íŠ¸ë™íŠ¸ì˜Â **ì†Œìœ ì**ë§Œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.
- ìœ„ ì½”ë“œì—ì„œ í•¨ìˆ˜ ì œì–´ìëŠ” Â `modifier onlyOwner()`

### `Ownable`Â ì»¨íŠ¸ë™íŠ¸ê°€ í•˜ëŠ” í–‰ë™

1. ì»¨íŠ¸ë™íŠ¸ê°€ ìƒì„±ë˜ë©´ ì»¨íŠ¸ë™íŠ¸ì˜ ìƒì„±ìê°€Â `owner`ì—Â `msg.sender`(ì»¨íŠ¸ë™íŠ¸ë¥¼ ë°°í¬í•œ ì‚¬ëŒ)ë¥¼ ëŒ€ì…í•œë‹¤.
2. íŠ¹ì •í•œ í•¨ìˆ˜ë“¤ì— ëŒ€í•´ì„œ ì˜¤ì§Â `ì†Œìœ ì`ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì œí•œ ê°€ëŠ¥í•œÂ `onlyOwner`Â ì œì–´ìë¥¼ ì¶”ê°€í•œë‹¤.
3. ìƒˆë¡œìš´Â `ì†Œìœ ì`ì—ê²Œ í•´ë‹¹ ì»¨íŠ¸ë™íŠ¸ì˜ ì†Œìœ ê¶Œì„ ì˜®ê¸¸ ìˆ˜ ìˆë„ë¡ í•œë‹¤.

`onlyOwner`ëŠ” ì»¨íŠ¸ë™íŠ¸ì—ì„œ í”íˆ ì“°ëŠ” ê²ƒ ì¤‘ í•˜ë‚˜ë¼, ëŒ€ë¶€ë¶„ì˜ ì†”ë¦¬ë””í‹° DAppë“¤ì€Â `Ownable`Â ì»¨íŠ¸ë™íŠ¸ë¥¼ ë³µì‚¬/ë¶™ì—¬ë„£ê¸° í•˜ë©´ì„œ ì‹œì‘í•œë‹¤. ê·¸ë¦¬ê³  ì²« ì»¨íŠ¸ë™íŠ¸ëŠ” ì´ ì»¨íŠ¸ë™íŠ¸ë¥¼ ìƒì†í•´ì„œ ë§Œë“ ë‹¤.

<aside>
â­ ì‹¤ìŠµ

ìš°ë¦¬ê°€ ë¨¼ì €Â `Ownable`Â ì»¨íŠ¸ë™íŠ¸ì˜ ì½”ë“œë¥¼Â `ownable.sol`ì´ë¼ëŠ” ìƒˆë¡œìš´ íŒŒì¼ë¡œ ë³µì‚¬í•´ë†¨ë‹¤ë„¤. ì–´ì„œÂ `ZombieFactory`ê°€ ì´ê±¸ ìƒì†ë°›ë„ë¡ ë§Œë“¤ì–´ë³´ê²Œ.

1. ìš°ë¦¬ ì½”ë“œê°€Â `ownable.sol`ì˜ ë‚´ìš©ì„Â `import`í•˜ë„ë¡ ìˆ˜ì •í•˜ê²Œ. ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ê¸°ì–µì´ ë‚˜ì§€ ì•ŠëŠ”ë‹¤ë©´Â `zombiefeeding.sol`ì„ ì‚´í´ë³´ê²Œ.
2. `ZombieFactory`Â ì»¨íŠ¸ë™íŠ¸ê°€Â `Ownable`ì„ ìƒì†í•˜ë„ë¡ ìˆ˜ì •í•˜ê²Œ. ë‹¤ì‹œ ë§í•˜ì§€ë§Œ, ì´ê±¸ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ì˜ ê¸°ì–µë‚˜ì§€ ì•ŠëŠ”ë‹¤ë©´Â `zombiefeeding.sol`ì„ ì‚´í´ë³´ê²Œ.

```solidity
pragma solidity ^0.4.19;

// 1. ì—¬ê¸°ì„œ importí•˜ê²Œ
import "./ownable.sol";

// 2. ìƒì†ì„ ì¶”ê°€í•˜ê²Œ:
contract ZombieFactory is Ownable {

    event NewZombie(uint zombieId, string name, uint dna);

    uint dnaDigits = 16;
    uint dnaModulus = 10 ** dnaDigits;

    struct Zombie {
        string name;
        uint dna;
    }

    Zombie[] public zombies;

    mapping (uint => address) public zombieToOwner;
    mapping (address => uint) ownerZombieCount;

    function _createZombie(string _name, uint _dna) internal {
        uint id = zombies.push(Zombie(_name, _dna)) - 1;
        zombieToOwner[id] = msg.sender;
        ownerZombieCount[msg.sender]++;
        NewZombie(id, _name, _dna);
    }

    function _generateRandomDna(string _str) private view returns (uint) {
        uint rand = uint(keccak256(_str));
        return rand % dnaModulus;
    }

    function createRandomZombie(string _name) public {
        require(ownerZombieCount[msg.sender] == 0);
        uint randDna = _generateRandomDna(_name);
        randDna = randDna - randDna % 100;
        _createZombie(_name, randDna);
    }

}

```

</aside>

## **í•¨ìˆ˜ ì œì–´ì**

- `function`Â í‚¤ì›Œë“œ ëŒ€ì‹ Â `modifier`Â í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œë‹¤.
- í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë“¯ì´ ì§ì ‘ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.
- í•¨ìˆ˜ ì •ì˜ë¶€ ëì— í•´ë‹¹ í•¨ìˆ˜ì˜ ì‘ë™ ë°©ì‹ì„ ë°”ê¾¸ë„ë¡ ì œì–´ìì˜ ì´ë¦„ì„ ë¶™ì¼ ìˆ˜ ìˆë‹¤.

ì•„ë˜ëŠ” `onlyOwner` ì˜ í•¨ìˆ˜ ì œì–´ìì´ë‹¤.

```solidity
/**
 * @dev Throws if called by any account other than the owner.
 */
modifier onlyOwner() {
  require(msg.sender == owner);
  _;
}

```

ì´ ì œì–´ìë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```solidity
contract MyContract is Ownable {
  event LaughManiacally(string laughter);

// ì•„ë˜ `onlyOwner`ì˜ ì‚¬ìš© ë°©ë²•ì„ ì˜ ë³´ê²Œ
	function likeABoss() external onlyOwner {
    LaughManiacally("Muahahahaha");
  }
}

```

- `likeABoss`Â í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´,Â `onlyOwner`ì˜ ì½”ë“œê°€Â **ë¨¼ì €**Â ì‹¤í–‰ëœë‹¤. ê·¸ë¦¬ê³ Â `onlyOwner`ì˜Â `_;`Â ë¶€ë¶„ì„Â `likeABoss`Â í•¨ìˆ˜ë¡œ ë˜ëŒì•„ê°€ í•´ë‹¹ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê²Œ ëœë‹¤.
- ì œì–´ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ë°©ë²•ì´ ìˆì§€ë§Œ, ê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ ì“°ëŠ” ì˜ˆì‹œ ì¤‘ í•˜ë‚˜ëŠ” í•¨ìˆ˜ ì‹¤í–‰ ì „ì—Â `require`Â ì²´í¬ë¥¼ ë„£ëŠ” ê²ƒì´ë‹¤.
- `onlyOwner`ì˜ ê²½ìš°ì—ëŠ”, í•¨ìˆ˜ì— ì´ ì œì–´ìë¥¼ ì¶”ê°€í•˜ë©´Â **ì˜¤ì§**Â ì»¨íŠ¸ë™íŠ¸ì˜Â **ì†Œìœ ì**(ì»¨íŠ¸ë™íŠ¸ë¥¼ ë°°í¬í•œ ì‚¬ëŒ)ë§Œì´ í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

<aside>
â­ ì‹¤ìŠµ

ì´ì œ ìš°ë¦¬ëŠ” ë¯¸ë˜ì—Â `setKittyContractAddress`ë¥¼ ìš°ë¦¬ë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ ì œí•œí•  ìˆ˜ ìˆë„¤.

1. `onlyOwner`Â ì œì–´ìë¥¼Â `setKittyContractAddress`ì— ì¶”ê°€í•˜ê²Œ.

```solidity
pragma solidity ^0.4.19;

import "./zombiefactory.sol";

contract KittyInterface {
  function getKitty(uint256 _id) external view returns (
    bool isGestating,
    bool isReady,
    uint256 cooldownIndex,
    uint256 nextActionAt,
    uint256 siringWithId,
    uint256 birthTime,
    uint256 matronId,
    uint256 sireId,
    uint256 generation,
    uint256 genes
  );
}

contract ZombieFeeding is ZombieFactory {

  KittyInterface kittyContract;

  // ì´ í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•˜ê²Œ:
  function setKittyContractAddress(address _address) external onlyOwner {
    kittyContract = KittyInterface(_address);
  }

  function feedAndMultiply(uint _zombieId, uint _targetDna, string _species) public {
    require(msg.sender == zombieToOwner[_zombieId]);
    Zombie storage myZombie = zombies[_zombieId];
    _targetDna = _targetDna % dnaModulus;
    uint newDna = (myZombie.dna + _targetDna) / 2;
    if (keccak256(_species) == keccak256("kitty")) {
      newDna = newDna - newDna % 100 + 99;
    }
    _createZombie("NoName", newDna);
  }

  function feedOnKitty(uint _zombieId, uint _kittyId) public {
    uint kittyDna;
    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);
    feedAndMultiply(_zombieId, kittyDna, "kitty");
  }

}

```

</aside>

## ê°€ìŠ¤

ì´ë”ë¦¬ì›€ DAppì´ ì‚¬ìš©í•˜ëŠ” ì—°ë£Œ

- ì†”ë¦¬ë””í‹°ì—ì„œëŠ” ì‚¬ìš©ìë“¤ì´ DAppì˜ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ë•Œë§ˆë‹¤Â **ê°€ìŠ¤**ë¼ê³  ë¶ˆë¦¬ëŠ” í™”íë¥¼ ì§€ë¶ˆí•´ì•¼ í•œë‹¤.
- ì‚¬ìš©ìëŠ” ì´ë”(ETH, ì´ë”ë¦¬ì›€ì˜ í™”í)ë¥¼ ì´ìš©í•´ì„œ ê°€ìŠ¤ë¥¼ ì‚¬ê¸° ë•Œë¬¸ì—, DApp í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ì‚¬ìš©ìë“¤ì€ ETHë¥¼ ì†Œëª¨í•´ì•¼ í•œë‹¤.
- ê°ê°ì˜ ì—°ì‚°ì€ ì†Œëª¨ë˜ëŠ”Â **ê°€ìŠ¤ ë¹„ìš©(gas cost)**ì´ ìˆê³ , ê·¸ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ë°ì— ì†Œëª¨ë˜ëŠ” ì»´í“¨íŒ… ìì›ì˜ ì–‘ì´ ì´ ë¹„ìš©ì„ ê²°ì •í•œë‹¤.
    - storageì— ê°’ì„ ì“°ëŠ” ê²ƒì€ ë‘ ê°œì˜ ì •ìˆ˜ë¥¼ ë”í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ë¹„ìš©ì´ ë†’ë‹¤.
- í•¨ìˆ˜ì˜ ì „ì²´Â **ê°€ìŠ¤ ë¹„ìš©**ì€ ê·¸ í•¨ìˆ˜ë¥¼ êµ¬ì„±í•˜ëŠ” ê°œë³„ ì—°ì‚°ë“¤ì˜ ê°€ìŠ¤ ë¹„ìš©ì„ ëª¨ë‘ í•©ì¹œ ê²ƒê³¼ ê°™ë‹¤.

### ê°€ìŠ¤ëŠ” ì™œ í•„ìš”í•œê°€?

ì´ë”ë¦¬ì›€ì—ì„œ ì–´ë–¤ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ë•Œ, ë„¤íŠ¸ì›Œí¬ìƒì˜ ëª¨ë“  ê°œë³„ ë…¸ë“œê°€ í•¨ìˆ˜ì˜ ì¶œë ¥ê°’ì„ ê²€ì¦í•˜ê¸° ìœ„í•´ ê·¸ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ì•¼ í•œë‹¤. ëª¨ë“  í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ê²€ì¦í•˜ëŠ” ìˆ˜ì²œ ê°œì˜ ë…¸ë“œê°€ ë°”ë¡œ ì´ë”ë¦¬ì›€ì„ ë¶„ì‚°í™”í•˜ê³ , ë°ì´í„°ë¥¼ ë³´ì¡´í•˜ë©° ëˆ„êµ°ê°€ ê²€ì—´í•  ìˆ˜ ì—†ë„ë¡ í•˜ëŠ” ìš”ì†Œì´ë‹¤.

ëˆ„êµ°ê°€ê°€ ë¬´í•œ ë°˜ë³µë¬¸ì„ ì¨ì„œ ë„¤íŠ¸ì›Œí¬ë¥¼ ë°©í•´í•˜ê±°ë‚˜, ìì› ì†Œëª¨ê°€ í° ì—°ì‚°ì„ ì¨ì„œ ë„¤íŠ¸ì›Œí¬ ìì›ì„ ëª¨ë‘ ì‚¬ìš©í•˜ì§€ ëª»í•˜ë„ë¡ ë§Œë“¤ê¸¸ ì›í–ˆê¸° ë•Œë¬¸ì— ì—°ì‚° ì²˜ë¦¬ì— ë¹„ìš©ì´ ë“¤ë„ë¡ ë§Œë“¤ì—ˆê³ , ì‚¬ìš©ìë“¤ì€ ì €ì¥ ê³µê°„ ë¿ë§Œ ì•„ë‹ˆë¼ ì—°ì‚° ì‚¬ìš© ì‹œê°„ì— ë”°ë¼ì„œë„ ë¹„ìš©ì„ ì§€ë¶ˆí•´ì•¼ í•œë‹¤.

> ì°¸ê³ : ì‚¬ì´ë“œì²´ì¸ì—ì„œëŠ” ë°˜ë“œì‹œ ì´ë ‡ì§€ëŠ” ì•Šë‹¤.
> 

### ê°€ìŠ¤ë¥¼ ì•„ë¼ê¸° ìœ„í•œ êµ¬ì¡°ì²´ ì••ì¶•

- **`struct` ê°€ ì•„ë‹ ë•Œ**
    - ì†”ë¦¬ë””í‹°ì—ì„œëŠ”Â `uint`ì˜ í¬ê¸°ì— ìƒê´€ì—†ì´ 256ë¹„íŠ¸ì˜ ì €ì¥ ê³µê°„ì„ ë¯¸ë¦¬ ì¡ì•„ë†“ê¸° ë•Œë¬¸ì— Â `uint8`,Â `uint16`,Â `uint32`ê°™ì€ í•˜ìœ„ íƒ€ì…ë“¤ì„ ì“°ëŠ” ê²ƒì€ ê¸°ë³¸ì ìœ¼ë¡œëŠ” ê°€ìŠ¤ ì†Œëª¨ë¥¼ ì¤„ì´ëŠ” ë°ì— ì•„ë¬´ëŸ° ì´ë“ì´ ì—†ë‹¤.
- **`struct` ì•ˆì¼ ë•Œ**
    - **ê°€ëŠ¥í•œ ë” ì‘ì€ í¬ê¸°ì˜ ë³€ìˆ˜ë¥¼ ì‚¬ìš©**í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì†”ë¦¬ë””í‹°ì—ì„œ ê·¸ ë³€ìˆ˜ë“¤ì„ ë” ì ì€ ê³µê°„ì„ ì°¨ì§€í•˜ë„ë¡ ì••ì¶•í•  ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.
    - **ë™ì¼í•œ ë°ì´í„° íƒ€ì…ì€ í•˜ë‚˜ë¡œ ë¬¶ì–´**ë†“ëŠ” ê²ƒì´ ì¢‹ë‹¤. êµ¬ì¡°ì²´ì—ì„œ ì„œë¡œ ì˜†ì— ìˆë„ë¡ ì„ ì–¸í•˜ë©´ ì†”ë¦¬ë””í‹°ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì €ì¥ ê³µê°„ì„ ìµœì†Œí™”í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
        
        ex. `uint c; uint32 a; uint32 b;`ë¼ëŠ” í•„ë“œë¡œ êµ¬ì„±ëœ êµ¬ì¡°ì²´ëŠ” `uint32`Â í•„ë“œê°€ ë¬¶ì—¬ìˆê¸° ë•Œë¬¸ì—Â `uint32 a; uint c; uint32 b;`Â í•„ë“œë¡œ êµ¬ì„±ëœ êµ¬ì¡°ì²´ë³´ë‹¤ ê°€ìŠ¤ë¥¼ ëœ ì†Œëª¨í•œë‹¤.
        

```solidity
struct NormalStruct {
  uint a;
  uint b;
  uint c;
}

struct MiniMe {
  uint32 a;
  uint32 b;
  uint c;
}

// `mini`ëŠ” êµ¬ì¡°ì²´ ì••ì¶•ì„ í–ˆê¸° ë•Œë¬¸ì— `normal`ë³´ë‹¤ ê°€ìŠ¤ë¥¼ ì¡°ê¸ˆ ì‚¬ìš©í•  ê²ƒ
NormalStruct normal = NormalStruct(10, 20, 30);
MiniMe mini = MiniMe(10, 20, 30);

```

<aside>
â­ ì‹¤ìŠµ

ì´ë²ˆ ë ˆìŠ¨ì—ì„œëŠ”, ìš°ë¦¬ëŠ” ìš°ë¦¬ì˜ ì¢€ë¹„ì—ê²Œ 2ê°œì˜ ìƒˆë¡œìš´ íŠ¹ì§•ì„ ì¶”ê°€í•  ê²ƒì´ë„¤.Â `level`ê³¼Â `readyTime`ì´ì§€.Â `readyTime`ì€ ì¢€ë¹„ê°€ ë¨¹ì´ë¥¼ ë¨¹ëŠ” ë¹ˆë„ë¥¼ ì œí•œí•  ì¬ì‚¬ìš© ëŒ€ê¸° ì‹œê°„ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ë„¤.

ì, ê·¸ëŸ¼ ë‹¤ì‹œÂ `zombiefactory.sol`ìœ¼ë¡œ ëŒì•„ê°€ì§€.

1. ìš°ë¦¬ì˜Â `Zombie`Â êµ¬ì¡°ì²´ì— 2ê°œì˜ ì†ì„±ì„ ë” ì¶”ê°€í•˜ê²Œ:Â `level`(`uint32`)ê³¼Â `readyTime`(ë§ˆì°¬ê°€ì§€ë¡œÂ `uint32`)ë¥¼ ë§ì´ì§€. ìš°ë¦¬ëŠ” ì´ ë°ì´í„° íƒ€ì…ë“¤ì„ ì••ì¶•í•˜ê¸¸ ì›í•˜ë‹ˆ, ì´ ë‘˜ì„ êµ¬ì¡°ì²´ì˜ ë§ˆì§€ë§‰ ë¶€ë¶„ì— ì“°ê²Œ.

ì¢€ë¹„ì˜ ë ˆë²¨ê³¼ ì‹œê°„ ë°ì´í„°(Timestamp)ë¥¼ ì €ì¥í•˜ëŠ” ë°ì—ëŠ” ì¶©ë¶„í•˜ê³ ë„ ë‚¨ëŠ” í¬ê¸°ì´ë‹ˆ, ì´ë ‡ê²Œ í•˜ë©´ ë³´í†µì˜Â `uint`(256ë¹„íŠ¸)ë¥¼ ì“°ëŠ” ê²ƒë³´ë‹¤ ë°ì´í„°ë¥¼ ë” ì••ì¶•í•´ì„œ ê°€ìŠ¤ ë¹„ìš©ì„ ì¤„ì´ë„ë¡ í•´ì¤„ ê²ƒì´ë„¤.

```solidity
pragma solidity ^0.4.19;

import "./ownable.sol";

contract ZombieFactory is Ownable {

    event NewZombie(uint zombieId, string name, uint dna);

    uint dnaDigits = 16;
    uint dnaModulus = 10 ** dnaDigits;

    struct Zombie {
        string name;
        uint dna;
        uint32 level;
        uint32 readyTime;
    }

    Zombie[] public zombies;

    mapping (uint => address) public zombieToOwner;
    mapping (address => uint) ownerZombieCount;

    function _createZombie(string _name, uint _dna) internal {
        uint id = zombies.push(Zombie(_name, _dna)) - 1;
        zombieToOwner[id] = msg.sender;
        ownerZombieCount[msg.sender]++;
        NewZombie(id, _name, _dna);
    }

    function _generateRandomDna(string _str) private view returns (uint) {
        uint rand = uint(keccak256(_str));
        return rand % dnaModulus;
    }

    function createRandomZombie(string _name) public {
        require(ownerZombieCount[msg.sender] == 0);
        uint randDna = _generateRandomDna(_name);
        randDna = randDna - randDna % 100;
        _createZombie(_name, randDna);
    }

}

```

</aside>

## ì‹œê°„ ë‹¨ìœ„(Time units)

- ì†”ë¦¬ë””í‹°ëŠ” ì‹œê°„ì„ ë‹¤ë£° ìˆ˜ ìˆëŠ” ë‹¨ìœ„ê³„ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•œë‹¤.
- `now`Â ë³€ìˆ˜ë¥¼ ì“°ë©´ í˜„ì¬ì˜ ìœ ë‹‰ìŠ¤ íƒ€ì„ìŠ¤íƒ¬í”„(1970ë…„ 1ì›” 1ì¼ë¶€í„° ì§€ê¸ˆê¹Œì§€ì˜ ì´ˆ ë‹¨ìœ„ í•©) ê°’ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.

> ì°¸ê³ : ìœ ë‹‰ìŠ¤ íƒ€ì„ì€ ì „í†µì ìœ¼ë¡œ 32ë¹„íŠ¸ ìˆ«ìë¡œ ì €ì¥ëœë‹¤. ì´ëŠ” ìœ ë‹‰ìŠ¤ íƒ€ì„ìŠ¤íƒ¬í”„ ê°’ì´ 32ë¹„íŠ¸ë¡œ í‘œì‹œê°€ ë˜ì§€ ì•Šì„ ë§Œí¼ ì»¤ì¡Œì„ ë•Œ ë§ì€ êµ¬í˜• ì‹œìŠ¤í…œì— ë¬¸ì œê°€ ë°œìƒí•  "Year 2038" ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‹ˆ ë§Œì•½ DAppì´ ê·¸ ì´í›„ê¹Œì§€ ìš´ì˜ë˜ê¸¸ ì›í•œë‹¤ë©´, 64ë¹„íŠ¸ ìˆ«ìë¥¼ ì¨ì•¼ í•  ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ìœ ì €ë“¤ì€ ê·¸ë™ì•ˆ ë” ë§ì€ ê°€ìŠ¤ë¥¼ ì†Œëª¨í•´ì•¼ í•  ê²ƒì´ë‹¤. ì„¤ê³„ë¥¼ ë³´ê³  ê²°ì •ì„ í•´ì•¼ í•œë‹¤!
> 
- `seconds`,Â `minutes`,Â `hours`,Â `days`,Â `weeks`,Â `years`Â ê°™ì€ ì‹œê°„ ë‹¨ìœ„ë„ ìˆë‹¤.
    - ì´ ë‹¨ìœ„ë“¤ì€ ê·¸ì— í•´ë‹¹í•˜ëŠ” ê¸¸ì´ ë§Œí¼ì˜ ì´ˆ ë‹¨ìœ„Â `uint`Â ìˆ«ìë¡œ ë³€í™˜ëœë‹¤.
        - `1 minutes`ëŠ”Â `60`,Â `1 hours`ëŠ”Â `3600`(60ì´ˆ x 60 ë¶„),Â `1 days`ëŠ”Â `86400`(24ì‹œê°„ x 60ë¶„ x 60ì´ˆ)

```solidity
uint lastUpdated;

// `lastUpdated`ë¥¼ `now`ë¡œ ì„¤ì •
function updateTimestamp() public {
  lastUpdated = now;
}

// ë§ˆì§€ë§‰ìœ¼ë¡œ `updateTimestamp`ê°€ í˜¸ì¶œëœ ë’¤ 5ë¶„ì´ ì§€ë‚¬ìœ¼ë©´ `true`ë¥¼, 5ë¶„ì´ ì•„ì§ ì§€ë‚˜ì§€ ì•Šì•˜ìœ¼ë©´ `false`ë¥¼ ë°˜í™˜
function fiveMinutesHavePassed() public view returns (bool) {
  return (now >= (lastUpdated + 5 minutes));
}

```

<aside>
â­ ì‹¤ìŠµ

ìš°ë¦¬ DAppì— ì¬ì‚¬ìš© ëŒ€ê¸° ì‹œê°„ì„ ì¶”ê°€í•˜ê³ , ì¢€ë¹„ë“¤ì´ ê³µê²©í•˜ê±°ë‚˜ ë¨¹ì´ë¥¼ ë¨¹ì€ í›„Â **1ì¼**ì´ ì§€ë‚˜ì•¼ë§Œ ë‹¤ì‹œ ê³µê²©í•  ìˆ˜ ìˆë„ë¡ í•  ê²ƒì´ë„¤.

1. `cooldownTime`ì´ë¼ëŠ”Â `uint`Â ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³ , ì—¬ê¸°ì—Â `1 days`ë¥¼ ëŒ€ì…í•˜ê²Œ.(ë¬¸ë²•ì ìœ¼ë¡œ ì´ìƒí•˜ê²Œ ë³´ì—¬ë„ ë„˜ì–´ê°€ê²Œ. ìë„¤ê°€ "1 day"ë¥¼ ëŒ€ì…í•œë‹¤ë©´, ì»´íŒŒì¼ì´ ë˜ì§€ ì•Šì„ ê²ƒì¼ì„¸!)
2. ìš°ë¦¬ê°€ ì´ì „ ì±•í„°ì—ì„œ ìš°ë¦¬ì˜Â `Zombie`Â êµ¬ì¡°ì²´ì—Â `level`ê³¼Â `readyTime`ì„ ì¶”ê°€í–ˆìœ¼ë‹ˆ, ìš°ë¦°Â `Zombie`Â êµ¬ì¡°ì²´ë¥¼ ìƒì„±í•  ë•Œ í•¨ìˆ˜ì˜ ì¸ìˆ˜ ê°œìˆ˜ê°€ ì •í™•íˆ ë§ë„ë¡Â `_createZombie()`Â í•¨ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•˜ë„¤.
    
    ì½”ë“œì˜Â `zombies.push`Â ì¤„ì— 2ê°œì˜ ì¸ìˆ˜ë¥¼ ë” ì‚¬ìš©í•˜ë„ë¡ ì—…ë°ì´íŠ¸í•˜ê²Œ:Â `1`(`level`ì— ì‚¬ìš©),Â `uint32(now + cooldownTime)`(`readyTime`ì— ì‚¬ìš©).
    

> ì°¸ê³ :Â nowê°€ ê¸°ë³¸ì ìœ¼ë¡œÂ uint256ì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì—,Â uint32(...)Â ë¶€ë¶„ì´ í•„ìˆ˜ì ì´ë„¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ í•´ë‹¹ ë°ì´í„°ë¥¼Â uint32ë¡œ ëª…ì‹œì ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì´ì§€.
> 

`now + cooldownTime`ì€ í˜„ì¬ ìœ ë‹‰ìŠ¤ íƒ€ì„ìŠ¤íƒ¬í”„(ì´ˆ ë‹¨ìœ„)ì— 1ì¼ì„ ì´ˆ ë‹¨ìœ„ë¡œ ë°”ê¾¼ ê²ƒì˜ í•©ê³¼ ê°™ì„ ê²ƒì´ë„¤. ë°”ê¿” ë§í•´ ì§€ê¸ˆë¶€í„° í•˜ë£¨ ë’¤ì˜ ìœ ë‹‰ìŠ¤ íƒ€ì„ìŠ¤íƒ¬í”„ ê°’ê³¼ ê°™ì€ ê²ƒì´ì§€. ì´í›„ì— ìš°ë¦¬ëŠ” ì¢€ë¹„ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì¶©ë¶„í•œ ì‹œê°„ì´ ì§€ë‚¬ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ì¢€ë¹„ì˜Â `readyTime`ì´Â `now`ë³´ë‹¤ í°ì§€ ë¹„êµí•  ê²ƒì´ë„¤.

ë‹¤ìŒ ì±•í„°ì—ì„œëŠ”Â `readyTime`ì— ê¸°ë°˜í•˜ì—¬ í–‰ë™ì„ ì œí•œí•˜ë„ë¡ í•˜ëŠ” ê¸°ëŠ¥ë“¤ì„ êµ¬í˜„í•  ê²ƒì´ë„¤.

```solidity
pragma solidity ^0.4.19;

import "./ownable.sol";

contract ZombieFactory is Ownable {

    event NewZombie(uint zombieId, string name, uint dna);

    uint dnaDigits = 16;
    uint dnaModulus = 10 ** dnaDigits;
    // 1. `cooldownTime`ì„ ì—¬ê¸°ì— ì •ì˜í•˜ê²Œ
    uint cooldownTime = 1 days;

    struct Zombie {
        string name;
        uint dna;
        uint32 level;
        uint32 readyTime;
    }

    Zombie[] public zombies;

    mapping (uint => address) public zombieToOwner;
    mapping (address => uint) ownerZombieCount;

    function _createZombie(string _name, uint _dna) internal {
        // 2. ì•„ë˜ ì¤„ì„ ì—…ë°ì´íŠ¸í•˜ê²Œ:
        uint id = zombies.push(Zombie(_name, _dna, 1, uint32(now + cooldownTime))) - 1;
        zombieToOwner[id] = msg.sender;
        ownerZombieCount[msg.sender]++;
        NewZombie(id, _name, _dna);
    }

    function _generateRandomDna(string _str) private view returns (uint) {
        uint rand = uint(keccak256(_str));
        return rand % dnaModulus;
    }

    function createRandomZombie(string _name) public {
        require(ownerZombieCount[msg.sender] == 0);
        uint randDna = _generateRandomDna(_name);
        randDna = randDna - randDna % 100;
        _createZombie(_name, randDna);
    }

}

```

</aside>

## êµ¬ì¡°ì²´ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ê¸°

`private`Â ë˜ëŠ”Â `internal`Â í•¨ìˆ˜ì— ì¸ìˆ˜ë¡œì„œ êµ¬ì¡°ì²´ì˜ storage í¬ì¸í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

```solidity
function _doStuff(Zombie storage _zombie) internal {
// _zombieë¡œ í•  ìˆ˜ ìˆëŠ” ê²ƒë“¤ì„ ì²˜ë¦¬
}

```

ì´ëŸ° ë°©ì‹ìœ¼ë¡œ í•¨ìˆ˜ì— ì¢€ë¹„IDë¥¼ ì „ë‹¬í•˜ê³  ì¢€ë¹„ë¥¼ ì°¾ëŠ” ëŒ€ì‹ , ì¢€ë¹„ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

<aside>
â­ ì‹¤ìŠµ

1. `_triggerCooldown`ì„ ì •ì˜í•˜ë©´ì„œ ì‹œì‘í•˜ì§€. ì´ í•¨ìˆ˜ëŠ” 1ê°œì˜ ì¸ìˆ˜ë¡œÂ `Zombie storage`Â í¬ì¸í„° íƒ€ì…ì¸Â `_zombie`ë¥¼ ë°›ë„¤. ì´ í•¨ìˆ˜ëŠ”Â `internal`ì´ì–´ì•¼ í•˜ë„¤.
2. í•¨ìˆ˜ì˜ ë‚´ìš©ì—ì„œëŠ”Â `_zombie.readyTime`ì„Â `uint32(now + cooldownTime)`ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•˜ë„¤.
3. ë‹¤ìŒìœ¼ë¡œ,Â `_isReady`ë¼ê³  ë¶ˆë¦¬ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ê²Œ. ì´ í•¨ìˆ˜ ì—­ì‹œÂ `_zombie`ë¼ëŠ” ì´ë¦„ì˜Â `Zombie storage`Â íƒ€ì… ì¸ìˆ˜ë¥¼ ë°›ë„¤.Â `internal view`ì—¬ì•¼ í•˜ê³ ,Â `bool`ì„ ë¦¬í„´í•´ì•¼ í•˜ë„¤.
4. í•¨ìˆ˜ì˜ ë‚´ìš©ì—ì„œëŠ”Â `(_zombie.readyTime <= now)`ë¥¼ ë¦¬í„´í•´ì•¼ í•˜ê³ , ì´ëŠ”Â `true`Â ì•„ë‹ˆë©´Â `false`ë¡œ ê³„ì‚°ë  ê²ƒì´ë„¤. ì´ í•¨ìˆ˜ëŠ” ìš°ë¦¬ì—ê²Œ ì¢€ë¹„ê°€ ë¨¹ì´ë¥¼ ë¨¹ì€ í›„ ì¶©ë¶„í•œ ì‹œê°„ì´ ì§€ë‚¬ëŠ”ì§€ ì•Œë ¤ì¤„ ê²ƒì´ë„¤.

```solidity
pragma solidity ^0.4.19;

import "./zombiefactory.sol";

contract KittyInterface {
  function getKitty(uint256 _id) external view returns (
    bool isGestating,
    bool isReady,
    uint256 cooldownIndex,
    uint256 nextActionAt,
    uint256 siringWithId,
    uint256 birthTime,
    uint256 matronId,
    uint256 sireId,
    uint256 generation,
    uint256 genes
  );
}

contract ZombieFeeding is ZombieFactory {

  KittyInterface kittyContract;

  function setKittyContractAddress(address _address) external onlyOwner {
    kittyContract = KittyInterface(_address);
  }

  // 1. `_triggerCooldown` í•¨ìˆ˜ë¥¼ ì—¬ê¸°ì— ì •ì˜í•˜ê²Œ
  function _triggerCooldown(Zombie storage _zombie) internal {
    _zombie.readyTime = uint32(now + cooldownTime);
  }
  // 2. `_isReady` í•¨ìˆ˜ë¥¼ ì—¬ê¸°ì— ì •ì˜í•˜ê²Œ
  function _isReady(Zombie storage _zombie) internal view returns (bool) {
    return (_zombie.readyTime <= now);
  }

  function feedAndMultiply(uint _zombieId, uint _targetDna, string _species) public {
    require(msg.sender == zombieToOwner[_zombieId]);
    Zombie storage myZombie = zombies[_zombieId];
    _targetDna = _targetDna % dnaModulus;
    uint newDna = (myZombie.dna + _targetDna) / 2;
    if (keccak256(_species) == keccak256("kitty")) {
      newDna = newDna - newDna % 100 + 99;
    }
    _createZombie("NoName", newDna);
  }

  function feedOnKitty(uint _zombieId, uint _kittyId) public {
    uint kittyDna;
    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);
    feedAndMultiply(_zombieId, kittyDna, "kitty");
  }

}

```

</aside>

## Public í•¨ìˆ˜ & ë³´ì•ˆ

- ëª¨ë“ Â `public`ê³¼Â `external`Â í•¨ìˆ˜ë¥¼ ê²€ì‚¬í•˜ê³ , ì‚¬ìš©ìë“¤ì´ ê·¸ í•¨ìˆ˜ë“¤ì„ ë‚¨ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ìƒê°í•´ë³´ë©´ì„œ ë³´ì•ˆì„ ì ê²€í•˜ë©´ ì¢‹ë‹¤.
- ì´ í•¨ìˆ˜ë“¤ì´Â `onlyOwner`Â ê°™ì€ ì œì–´ìë¥¼ ê°–ì§€ ì•ŠëŠ” ì´ìƒ, ì–´ë–¤ ì‚¬ìš©ìë“  ì´ í•¨ìˆ˜ë“¤ì„ í˜¸ì¶œí•˜ê³  ìì‹ ë“¤ì´ ì›í•˜ëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ í•¨ìˆ˜ì— ì „ë‹¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•´ì•¼ í•œë‹¤.
- ë‚¨ìš©ì„ ë§‰ì„ ì‰¬ìš´ ë°©ë²• ì¤‘ í•˜ë‚˜ëŠ” í•¨ìˆ˜ë¥¼Â `internal`ë¡œ ë§Œë“œëŠ” ê²ƒì´ë‹¤.

<aside>
â­ ì‹¤ìŠµ

1. í˜„ì¬Â `feedAndMultiply`ëŠ”Â `public`Â í•¨ìˆ˜ì´ë„¤. ì´ê±¸Â `internal`ë¡œ ë§Œë“¤ì–´ì„œ ì»¨íŠ¸ë™íŠ¸ê°€ ë” ì•ˆì „í•´ì§€ë„ë¡ í•˜ì„¸. ìš°ë¦¬ëŠ” ì‚¬ìš©ìë“¤ì´ ê·¸ë“¤ì´ ì›í•˜ëŠ” ì•„ë¬´ DNAë‚˜ ë„£ì–´ì„œ ì´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ì›í•˜ì§€ ì•Šë„¤.
2. `feedAndMultiply`Â í•¨ìˆ˜ê°€Â `cooldownTime`ì„ ê³ ë ¤í•˜ë„ë¡ ë§Œë“¤ì–´ë³´ì„¸. ë¨¼ì €,Â `myZombie`ë¥¼ ì°¾ì€ í›„ì—,Â `_isReady()`ë¥¼ í™•ì¸í•˜ëŠ”Â `require`Â ë¬¸ì¥ì„ ì¶”ê°€í•˜ê³  ê±°ê¸°ì—Â `myZombie`ë¥¼ ì „ë‹¬í•˜ê²Œ. ì´ë ‡ê²Œ í•˜ë©´ ì‚¬ìš©ìë“¤ì€ ì¢€ë¹„ì˜ ì¬ì‚¬ìš© ëŒ€ê¸° ì‹œê°„ì´ ëë‚œ ë‹¤ìŒì—ë§Œ ì´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„¤.
3. í•¨ìˆ˜ì˜ ëì—ì„œÂ `_triggerCooldown(myZombie)`Â í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë¨¹ì´ë¥¼ ë¨¹ëŠ” ê²ƒì´ ì¢€ë¹„ì˜ ì¬ì‚¬ìš© ëŒ€ê¸° ì‹œê°„ì„ ë§Œë“¤ë„ë¡ í•˜ê²Œ.

```solidity
pragma solidity ^0.4.19;

import "./zombiefactory.sol";

contract KittyInterface {
  function getKitty(uint256 _id) external view returns (
    bool isGestating,
    bool isReady,
    uint256 cooldownIndex,
    uint256 nextActionAt,
    uint256 siringWithId,
    uint256 birthTime,
    uint256 matronId,
    uint256 sireId,
    uint256 generation,
    uint256 genes
  );
}

contract ZombieFeeding is ZombieFactory {

  KittyInterface kittyContract;

  function setKittyContractAddress(address _address) external onlyOwner {
    kittyContract = KittyInterface(_address);
  }

  function _triggerCooldown(Zombie storage _zombie) internal {
    _zombie.readyTime = uint32(now + cooldownTime);
  }

  function _isReady(Zombie storage _zombie) internal view returns (bool) {
      return (_zombie.readyTime <= now);
  }

  // 1. ì´ í•¨ìˆ˜ë¥¼ internalë¡œ ë§Œë“¤ê²Œ
  function feedAndMultiply(uint _zombieId, uint _targetDna, string _species) internal {
    require(msg.sender == zombieToOwner[_zombieId]);
    Zombie storage myZombie = zombies[_zombieId];
    // 2. ì—¬ê¸°ì— `_isReady`ë¥¼ í™•ì¸í•˜ëŠ” ë¶€ë¶„ì„ ì¶”ê°€í•˜ê²Œ
    require(_isReady(myZombie));
    _targetDna = _targetDna % dnaModulus;
    uint newDna = (myZombie.dna + _targetDna) / 2;
    if (keccak256(_species) == keccak256("kitty")) {
      newDna = newDna - newDna % 100 + 99;
    }
    _createZombie("NoName", newDna);
    // 3. `_triggerCooldown`ì„ í˜¸ì¶œí•˜ê²Œ
    _triggerCooldown(myZombie);
  }

  function feedOnKitty(uint _zombieId, uint _kittyId) public {
    uint kittyDna;
    (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);
    feedAndMultiply(_zombieId, kittyDna, "kitty");
  }

}

```

</aside>

## ì¸ìˆ˜ë¥¼ ê°€ì§€ëŠ” í•¨ìˆ˜ ì œì–´ì

ì•„ë˜ ì½”ë“œì—ì„œ `olderthan`Â ì œì–´ìê°€ í•¨ìˆ˜ì™€ ë¹„ìŠ·í•˜ê²Œ ì¸ìˆ˜ë¥¼ ë°›ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³ Â `driveCar`Â í•¨ìˆ˜ëŠ” ë°›ì€ ì¸ìˆ˜ë¥¼ ì œì–´ìë¡œ ì „ë‹¬í•˜ê³  ìˆë‹¤.

```solidity
// ì‚¬ìš©ìì˜ ë‚˜ì´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ë§¤í•‘
mapping (uint => uint) public age;

// ì‚¬ìš©ìê°€ íŠ¹ì • ë‚˜ì´ ì´ìƒì¸ì§€ í™•ì¸í•˜ëŠ” ì œì–´ì
modifier olderThan(uint _age, uint _userId) {
  require (age[_userId] >= _age);
  _;
}

// ì°¨ë¥¼ ìš´ì „í•˜ê¸° ìœ„í–ì„œëŠ” 16ì‚´ ì´ìƒì´ì–´ì•¼ í•˜ë„¤(ì ì–´ë„ ë¯¸êµ­ì—ì„œëŠ”).
// `olderThan` ì œì–´ìë¥¼ ì¸ìˆ˜ì™€ í•¨ê»˜ í˜¸ì¶œí•˜ë ¤ë©´ ì´ë ‡ê²Œ í•˜ë©´ ë˜ë„¤
function driveCar(uint _userId) public olderThan(16, _userId) {
// í•„ìš”í•œ í•¨ìˆ˜ ë‚´ìš©ë“¤
}
```

<aside>
â­ ì‹¤ìŠµ

1. `ZombieHelper`ì—ì„œ,Â `aboveLevel`ì´ë¼ëŠ” ì´ë¦„ì˜Â `modifier`ë¥¼ ë§Œë“¤ê²Œ. ì´ ì œì–´ìëŠ”Â `_level`(`uint`),Â `_zombieId`(`uint`) ë‘ ê°œì˜ ì¸ìˆ˜ë¥¼ ë°›ì„ ê²ƒì´ë„¤.
2. í•¨ìˆ˜ ë‚´ìš©ì—ì„œëŠ”Â `zombies[_zombieId].level`ì´Â `_level`Â ì´ìƒì¸ì§€ í™•ì‹¤í•˜ê²Œ í™•ì¸í•´ì•¼ í•˜ë„¤.
3. í•¨ìˆ˜ì˜ ë‚˜ë¨¸ì§€ ë‚´ìš©ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ì œì–´ìì˜ ë§ˆì§€ë§‰ ì¤„ì—Â `_;`ë¥¼ ë„£ëŠ” ê²ƒì„ ìŠì§€ ë§ê²Œ.

```solidity
pragma solidity ^0.4.19;

import "./zombiefeeding.sol";

contract ZombieHelper is ZombieFeeding {

  // ì—¬ê¸°ì„œ ì‹œì‘í•˜ê²Œ
  modifier aboveLevel(uint _level, uint _zombieId) {
    require (zombies[_zombieId].level >= _level);
    _;
  }
}

```

</aside>

<aside>
â­ ì‹¤ìŠµ

ì´ì œ ëª‡ëª‡ í•¨ìˆ˜ë¥¼ ë§Œë“¤ ë•Œ ìš°ë¦¬ì˜Â `aboveLevel`Â ì œì–´ìë¥¼ ì‚¬ìš©í•´ë³´ì„¸.

ìš°ë¦¬ ê²Œì„ì—ì„œëŠ” ì‚¬ìš©ìë“¤ì´ ê·¸ë“¤ì˜ ì¢€ë¹„ë¥¼ ë ˆë²¨ì—…í•  ë•Œ ì¸ì„¼í‹°ë¸Œë¥¼ ì¤„ ê²ƒì´ë„¤.

- ë ˆë²¨ 2 ì´ìƒì¸ ì¢€ë¹„ì¸ ê²½ìš°, ì‚¬ìš©ìë“¤ì€ ê·¸ ì¢€ë¹„ì˜ ì´ë¦„ì„ ë°”ê¿€ ìˆ˜ ìˆë„¤.
- ë ˆë²¨ 20 ì´ìƒì¸ ì¢€ë¹„ì¸ ê²½ìš°, ì‚¬ìš©ìë“¤ì€ ê·¸ ì¢€ë¹„ì—ê²Œ ì„ì˜ì˜ DNAë¥¼ ì¤„ ìˆ˜ ìˆë„¤.
1. `changeName`ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ê²Œ. ì´ í•¨ìˆ˜ëŠ” 2ê°œì˜ ì¸ìˆ˜ë¥¼ ë°›ì„ ê²ƒì´ë„¤:Â `_zombieId`(`uint`),Â `_newName`(`string`). ê·¸ë¦¬ê³  í•¨ìˆ˜ë¥¼Â `external`ë¡œ ë§Œë“¤ê²Œ. ì´ í•¨ìˆ˜ëŠ”Â `aboveLevel`Â ì œì–´ìë¥¼ ê°€ì ¸ì•¼ í•˜ê³ ,Â `_level`ì—Â `2`ë¼ëŠ” ê°’ì„ ì „ë‹¬í•´ì•¼ í•˜ë„¤.Â `_zombieId`Â ë˜í•œ ì „ë‹¬í•˜ëŠ” ê²ƒì„ ìŠì§€ ë§ê²Œë‚˜.
2. í•¨ìˆ˜ì˜ ë‚´ìš©ì—ì„œëŠ”, ë¨¼ì € ìš°ë¦¬ëŠ”Â `msg.sender`ê°€Â `zombieToOwner[_zombieId]`ì™€ ê°™ì€ì§€ ê²€ì¦í•´ì•¼ í•˜ë„¤.Â `require`Â ë¬¸ì¥ì„ ì‚¬ìš©í•˜ê²Œ.
3. ê·¸ë¦¬ê³  ë‚˜ì„œ ì´ í•¨ìˆ˜ì—ì„œëŠ”Â `zombies[_zombieId].name`ì—Â `_newName`ì„ ëŒ€ì…í•´ì•¼ í•˜ë„¤.
4. `changeName`Â ì•„ë˜ì—Â `changeDna`ë¼ëŠ” ë˜ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ë§Œë“¤ê²Œ. ê·¸ë¦¬ê³  í•¨ìˆ˜ë¥¼Â `external`ë¡œ ë§Œë“¤ê²Œ. ì´ í•¨ìˆ˜ì˜ ì •ì˜ì™€ ë‚´ìš©ì€Â `changeName`ê³¼ ê±°ì˜ ë˜‘ê°™ì§€ë§Œ, ë‘ ë²ˆì§¸ ì¸ìˆ˜ê°€Â `_newDna`(`uint`)ì´ê³ ,Â `aboveLevel`ì˜Â `_level`Â ë§¤ê°œ ë³€ìˆ˜ì—Â `20`ì„ ì „ë‹¬í•´ì•¼ í•  ê²ƒì´ë„¤. ë¬¼ë¡ , ì´ í•¨ìˆ˜ëŠ” ì¢€ë¹„ì˜ ì´ë¦„ì„ ì„¤ì •í•˜ëŠ” ê²ƒ ëŒ€ì‹ ì— ì¢€ë¹„ì˜Â `dna`ë¥¼Â `_newDna`ë¡œ ì„¤ì •í•´ì•¼ í•˜ê² ì§€.

```solidity
pragma solidity ^0.4.19;

import "./zombiefeeding.sol";

contract ZombieHelper is ZombieFeeding {

  modifier aboveLevel(uint _level, uint _zombieId) {
    require(zombies[_zombieId].level >= _level);
    _;
  }

  // ì—¬ê¸°ì„œ ì‹œì‘í•˜ê²Œ
  function changeName(uint _zombieId, string _newName) external aboveLevel(2, _zombieId) {
    require(msg.sender == zombieToOwner[_zombieId]);
    zombies[_zombieId].name = _newName;
  }

  function changeDna(uint _zombieId, uint _newDna) external aboveLevel(20, _zombieId) {
    require(msg.sender == zombieToOwner[_zombieId]);
    zombies[_zombieId].dna = _newDna;
  }
}

```

</aside>

## 'View' í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ê°€ìŠ¤ ì ˆì•½í•˜ê¸°

`view`Â í•¨ìˆ˜ëŠ” ì‚¬ìš©ìì— ì˜í•´ ì™¸ë¶€ì—ì„œ í˜¸ì¶œë˜ì—ˆì„ ë•Œ ê°€ìŠ¤ë¥¼ ì „í˜€ ì†Œëª¨í•˜ì§€ ì•ŠëŠ”ë‹¤.

- `view`Â í•¨ìˆ˜ê°€ ë°ì´í„°ë¥¼ ì½ê¸°ë§Œ í•˜ê³  ë¸”ë¡ì²´ì¸ ìƒì—ì„œ ì‹¤ì œë¡œ ì–´ë–¤ ê²ƒë„ ìˆ˜ì •í•˜ì§€ ì•Šê¸° ë–„ë¬¸
- í•¨ìˆ˜ì—Â `view`Â í‘œì‹œë¥¼ í•˜ëŠ” ê²ƒì€ ì´ í•¨ìˆ˜ëŠ” ì‹¤í–‰í•  ë•Œ ë¡œì»¬ ì´ë”ë¦¬ì›€ ë…¸ë“œì— ì§ˆì˜ë§Œ ë‚ ë¦¬ë©´ ë˜ê³ , ë¸”ë¡ì²´ì¸ì— ì–´ë–¤ íŠ¸ëœì­ì…˜ë„ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ëœ»í•œë‹¤.
    - íŠ¸ëœì­ì…˜ì€ ëª¨ë“  ê°œë³„ ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ê³ , ê°€ìŠ¤ë¥¼ ì†Œëª¨í•œë‹¤.
- `view`Â í•¨ìˆ˜ëŠ” ì™¸ë¶€ì—ì„œ í˜¸ì¶œëì„ ë•Œì—ë§Œ ë¬´ë£Œì´ë‹¤.
- ê°€ëŠ¥í•œ ëª¨ë“  ê³³ì— ì½ê¸° ì „ìš©ì˜Â `external view`Â í•¨ìˆ˜ë¥¼ ì“°ë©´ ê°€ìŠ¤ë¥¼ ì ˆì•½í•  ìˆ˜ ìˆë‹¤.

> ì°¸ê³ : viewÂ í•¨ìˆ˜ê°€ ë™ì¼ ì»¨íŠ¸ë™íŠ¸ ë‚´ì— ìˆëŠ”,Â viewÂ í•¨ìˆ˜ê°€Â ì•„ë‹ŒÂ ë‹¤ë¥¸ í•¨ìˆ˜ì—ì„œ ë‚´ë¶€ì ìœ¼ë¡œ í˜¸ì¶œë  ê²½ìš°, ê°€ìŠ¤ë¥¼ ì†Œëª¨í•  ê²ƒì´ë‹¤. ì´ê²ƒì€ ë‹¤ë¥¸ í•¨ìˆ˜ê°€ ì´ë”ë¦¬ì›€ì— íŠ¸ëœì­ì…˜ì„ ìƒì„±í•˜ê³ , ì´ëŠ” ëª¨ë“  ê°œë³„ ë…¸ë“œì—ì„œ ê²€ì¦ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
> 

<aside>
â­ ì‹¤ìŠµ

ìš°ë¦¬ëŠ” ì‚¬ìš©ìì˜ ì „ì²´ ì¢€ë¹„ êµ°ëŒ€ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ êµ¬í˜„í•  ê²ƒì´ë„¤. ìš°ë¦¬ê°€ ë§Œì•½ ì‚¬ìš©ìë“¤ì˜ í”„ë¡œí•„ í˜ì´ì§€ì— ê·¸ë“¤ì˜ ì „ì²´ êµ°ëŒ€ë¥¼ í‘œì‹œí•˜ê³  ì‹¶ë‹¤ë©´, ë‚˜ì¤‘ì— ì´ í•¨ìˆ˜ë¥¼Â `web3.js`ì—ì„œ í˜¸ì¶œí•˜ë©´ ëœë‹¤ë„¤.

ì´ í•¨ìˆ˜ì˜ ë‚´ìš©ì€ ì¡°ê¸ˆ ë³µì¡í•´ì„œ, êµ¬í˜„í•˜ëŠ” ë°ì— ì±•í„° ëª‡ ê°œë¥¼ ì¨ì•¼ í•  ê²ƒì´ë„¤.

1. `getZombiesByOwner`ë¼ëŠ” ì´ë¦„ì˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ê²Œ. ì´ í•¨ìˆ˜ëŠ”Â `_owner`ë¼ëŠ” ì´ë¦„ì˜Â `address`ë¥¼ í•˜ë‚˜ì˜ ì¸ìˆ˜ë¡œ ë°›ì„ ê²ƒì´ë„¤.
2. ì´ê±¸Â `external view`Â í•¨ìˆ˜ë¡œ ë§Œë“¤ê²Œ. ìš°ë¦¬ëŠ” ì´ í•¨ìˆ˜ë¥¼Â `web3.js`ì—ì„œ ê°€ìŠ¤ë¥¼ ì“¸ í•„ìš” ì—†ì´ í˜¸ì¶œí•  ìˆ˜ ìˆì„ ê²ƒì´ë„¤.
3. ì´ í•¨ìˆ˜ëŠ”Â `uint[]`ë¥¼ ë°˜í™˜í•´ì•¼ í•˜ë„¤(`uint`ì˜ ë°°ì—´).

ì§€ê¸ˆì€ í•¨ìˆ˜ì˜ ë‚´ìš©ì„ ë¹„ì›Œë‘ê²Œ. ë‹¤ìŒ ì±•í„°ì—ì„œ ì±„ì›Œë‚˜ê°ˆ ê²ƒì´ë„¤.

```solidity
pragma solidity ^0.4.19;

import "./zombiefeeding.sol";

contract ZombieHelper is ZombieFeeding {

  modifier aboveLevel(uint _level, uint _zombieId) {
    require(zombies[_zombieId].level >= _level);
    _;
  }

  function changeName(uint _zombieId, string _newName) external aboveLevel(2, _zombieId) {
    require(msg.sender == zombieToOwner[_zombieId]);
    zombies[_zombieId].name = _newName;
  }

  function changeDna(uint _zombieId, uint _newDna) external aboveLevel(20, _zombieId) {
    require(msg.sender == zombieToOwner[_zombieId]);
    zombies[_zombieId].dna = _newDna;
  }

  // ìë„¤ì˜ í•¨ìˆ˜ë¥¼ ì—¬ê¸°ì— ë§Œë“¤ê²Œ
  function getZombiesByOwner(address _owner) external view returns (uint[]){

  }
}

```

</aside>

## StorageëŠ” ë¹„ì‹¸ë‹¤

ì†”ë¦¬ë””í‹°ì—ì„œ ë¹„ì‹¼ ì—°ì‚° ì¤‘ í•˜ë‚˜ëŠ” ë°”ë¡œÂ `storage`ë¥¼ ì“°ëŠ” ê²ƒì´ë‹¤.(íŠ¹íˆ ì“°ê¸° ì—°ì‚°)

- ë°ì´í„°ì˜ ì¼ë¶€ë¥¼ ì“°ê±°ë‚˜ ë°”ê¿€ ë•Œë§ˆë‹¤, ë¸”ë¡ì²´ì¸ì— ì˜êµ¬ì ìœ¼ë¡œ ê¸°ë¡ë˜ê¸° ë•Œë¬¸ì´ë‹¤.
    - ì§€êµ¬ìƒì˜ ìˆ˜ì²œ ê°œì˜ ë…¸ë“œë“¤ì´ ê·¸ë“¤ì˜ í•˜ë“œ ë“œë¼ì´ë¸Œì— ê·¸ ë°ì´í„°ë¥¼ ì €ì¥í•´ì•¼ í•˜ê³ , ë¸”ë¡ì²´ì¸ì´ ì»¤ì ¸ê°€ë©´ì„œ ì´ ë°ì´í„°ì˜ ì–‘ ë˜í•œ ê°™ì´ ì»¤ì ¸ê°€ê¸° ë•Œë¬¸ì— ì´ ì—°ì‚°ì—ëŠ” ë¹„ìš©ì´ ë“ ë‹¤.
- ë¹„ìš©ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ì„œ, ì§„ì§œ í•„ìš”í•œ ê²½ìš°ê°€ ì•„ë‹ˆë©´ storageì— ë°ì´í„°ë¥¼ ì“°ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤.
    - ì´ë¥¼ ìœ„í•´ ë•Œë•Œë¡œëŠ” ê²‰ë³´ê¸°ì— ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ë³´ì´ëŠ” í”„ë¡œê·¸ë˜ë° êµ¬ì„±ì„ í•  í•„ìš”ê°€ ìˆë‹¤.
        
        ex. ì–´ë–¤ ë°°ì—´ì—ì„œ ë‚´ìš©ì„ ë¹ ë¥´ê²Œ ì°¾ê¸° ìœ„í•´, ë‹¨ìˆœíˆ ë³€ìˆ˜ì— ì €ì¥í•˜ëŠ” ê²ƒ ëŒ€ì‹  í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ë°°ì—´ì„Â `memory`ì— ë‹¤ì‹œ ë§Œë“œëŠ” ê²ƒ
        
- ì†”ë¦¬ë””í‹°ì—ì„œëŠ” í° ë°ì´í„° ì§‘í•©ì˜ ê°œë³„ ë°ì´í„°ì— ëª¨ë‘ ì ‘ê·¼í•˜ëŠ” ê²ƒì´Â `external view`Â í•¨ìˆ˜ë¼ë©´Â `storage`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ë” ì €ë ´í•œ ë°©ë²•ì´ë‹¤.
    - `view`Â í•¨ìˆ˜ëŠ” ì‚¬ìš©ìë“¤ì˜ ê°€ìŠ¤ë¥¼ ì†Œëª¨í•˜ì§€ ì•Šê¸° ë•Œë¬¸

## ë©”ëª¨ë¦¬ì— ë°°ì—´ ì„ ì–¸í•˜ê¸°

Storageì— ì•„ë¬´ê²ƒë„ ì“°ì§€ ì•Šê³ ë„ í•¨ìˆ˜ ì•ˆì— ìƒˆë¡œìš´ ë°°ì—´ì„ ë§Œë“¤ê¸° ìœ„í•´ ë°°ì—´ì—Â `memory`Â í‚¤ì›Œë“œë¥¼ ì“¸ ìˆ˜ ìˆë‹¤.

- ì´ ë°°ì—´ì€ í•¨ìˆ˜ê°€ ëë‚  ë•Œê¹Œì§€ë§Œ ì¡´ì¬í•  ê²ƒì´ê³ , ì´ëŠ”Â `storage`ì˜ ë°°ì—´ì„ ì§ì ‘ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒë³´ë‹¤ ê°€ìŠ¤ ì†Œëª¨ ì¸¡ë©´ì—ì„œ í›¨ì”¬ ì €ë ´í•˜ë‹¤.
    - ì™¸ë¶€ì—ì„œ í˜¸ì¶œë˜ëŠ”Â `view`Â í•¨ìˆ˜ë¼ë©´ ë¬´ë£Œì´ë‹¤.

```solidity
function getArray() external pure returns(uint[]) {
// ë©”ëª¨ë¦¬ì— ê¸¸ì´ 3ì˜ ìƒˆë¡œìš´ ë°°ì—´ì„ ìƒì„±í•œë‹¤.
	uint[] memory values = new uint[](3);
// ì—¬ê¸°ì— íŠ¹ì •í•œ ê°’ë“¤ì„ ë„£ëŠ”ë‹¤.
  values.push(1);
  values.push(2);
  values.push(3);
// í•´ë‹¹ ë°°ì—´ì„ ë°˜í™˜í•œë‹¤.
	return values;
}

```

> ì°¸ê³ : ë©”ëª¨ë¦¬ ë°°ì—´ì€Â ë°˜ë“œì‹œÂ ê¸¸ì´ ì¸ìˆ˜ì™€ í•¨ê»˜ ìƒì„±ë˜ì–´ì•¼ í•œë‹¤.(ìœ„ ì˜ˆì‹œì—ì„œëŠ”,Â 3). ë©”ëª¨ë¦¬ ë°°ì—´ì€ í˜„ì¬ë¡œì„œëŠ” storage ë°°ì—´ì²˜ëŸ¼Â array.push()ë¡œ í¬ê¸°ê°€ ì¡°ì ˆë˜ì§€ ì•ŠëŠ”ë‹¤.
> 

<aside>
â­ ì‹¤ìŠµ

`getZombiesByOwner`Â í•¨ìˆ˜ì—ì„œ, ìš°ë¦¬ëŠ” íŠ¹ì •í•œ ì‚¬ìš©ìê°€ ì†Œìœ í•œ ëª¨ë“  ì¢€ë¹„ë¥¼Â `uint[]`Â ë°°ì—´ë¡œ ë°˜í™˜í•˜ê¸°ë¥¼ ì›í•˜ë„¤.

1. `result`ë¼ëŠ” ì´ë¦„ì˜Â `uint[] memory`Â ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê²Œ.
2. í•´ë‹¹ ë³€ìˆ˜ì—Â `uint`Â ë°°ì—´ì„ ëŒ€ì…í•˜ê²Œ. ë°°ì—´ì˜ ê¸¸ì´ëŠ” ì´Â `_owner`ê°€ ì†Œìœ í•œ ì¢€ë¹„ì˜ ê°œìˆ˜ì—¬ì•¼ í•˜ê³ , ì´ëŠ” ìš°ë¦¬ì˜Â `mapping`ì¸Â `ownerZombieCount[_owner]`ë¥¼ í†µí•´ì„œ ì°¾ì„ ìˆ˜ ìˆë„¤.
3. í•¨ìˆ˜ì˜ ëì—ì„œÂ `result`ë¥¼ ë°˜í™˜í•˜ê²Œ. ì§€ê¸ˆ ë‹¹ì¥ì€ ë¹ˆ ë°°ì—´ì´ì§€ë§Œ, ë‹¤ìŒ ì±•í„°ì—ì„œ ì´ë¥¼ ì±„ìš¸ ê²ƒì´ë„¤.

```solidity
pragma solidity ^0.4.19;

import "./zombiefeeding.sol";

contract ZombieHelper is ZombieFeeding {

  modifier aboveLevel(uint _level, uint _zombieId) {
    require(zombies[_zombieId].level >= _level);
    _;
  }

  function changeName(uint _zombieId, string _newName) external aboveLevel(2, _zombieId) {
    require(msg.sender == zombieToOwner[_zombieId]);
    zombies[_zombieId].name = _newName;
  }

  function changeDna(uint _zombieId, uint _newDna) external aboveLevel(20, _zombieId) {
    require(msg.sender == zombieToOwner[_zombieId]);
    zombies[_zombieId].dna = _newDna;
  }

  function getZombiesByOwner(address _owner) external view returns(uint[]) {
    uint[] memory result = new uint[](ownerZombieCount[_owner]);
    return result;
  }

}

```

</aside>

## `for`Â ë°˜ë³µë¬¸ ì‚¬ìš©í•˜ê¸°

ì†”ë¦¬ë””í‹°ì—ì„œÂ `for`Â ë°˜ë³µë¬¸ì˜ ë¬¸ë²•ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë¬¸ë²•ê³¼ ë¹„ìŠ·í•˜ë‹¤.

```solidity
// ì§ìˆ˜ë¡œ êµ¬ì„±ëœ ë°°ì—´ ë§Œë“¤ê¸°
function getEvens() pure external returns(uint[]) {
  uint[] memory evens = new uint[](5);
// ìƒˆë¡œìš´ ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¥¼ ì¶”ì í•˜ëŠ” ë³€ìˆ˜
	uint counter = 0;
// for ë°˜ë³µë¬¸ì—ì„œ 1ë¶€í„° 10ê¹Œì§€ ë°˜ë³µí•¨
	for (uint i = 1; i <= 10; i++) {
// `i`ê°€ ì§ìˆ˜ë¼ë©´...
		if (i % 2 == 0) {
// ë°°ì—´ì— ië¥¼ ì¶”ê°€í•¨
      evens[counter] = i;
// `evens`ì˜ ë‹¤ìŒ ë¹ˆ ì¸ë±ìŠ¤ ê°’ìœ¼ë¡œ counterë¥¼ ì¦ê°€ì‹œí‚´
      counter++;
    }
  }
  return evens;
}

// ì´ í•¨ìˆ˜ëŠ”Â [2, 4, 6, 8, 10]ë¥¼ ê°€ì§€ëŠ” ë°°ì—´ì„ ë°˜í™˜
```

<aside>
â­ ì‹¤ìŠµ

`for`Â ë°˜ë³µë¬¸ì„ ì¨ì„œÂ `getZombiesByOwner`Â í•¨ìˆ˜ë¥¼ ëë‚´ë³´ë„ë¡ í•˜ì§€. ë°˜ë³µë¬¸ ì•ˆì—ì„œëŠ” ìš°ë¦¬ DApp ì•ˆì— ìˆëŠ” ëª¨ë“  ì¢€ë¹„ë“¤ì— ì ‘ê·¼í•˜ê³ , ê·¸ë“¤ì˜ ì†Œìœ ìê°€ ìš°ë¦¬ê°€ ì°¾ëŠ” ìì¸ì§€ ë¹„êµí•˜ì—¬ í™•ì¸í•œ í›„, ì¡°ê±´ì— ë§ëŠ” ì¢€ë¹„ë“¤ì„Â `result`Â ë°°ì—´ì— ì¶”ê°€í•œ í›„ ë°˜í™˜í•  ê²ƒì´ë„¤.

1. `counter`ë¼ëŠ” ì´ë¦„ì˜Â `uint`ë¥¼ í•˜ë‚˜ ì„ ì–¸í•˜ê³ Â `0`ì„ ëŒ€ì…í•˜ê²Œ. ìš°ë¦°Â `result`Â ë°°ì—´ì—ì„œ ì¸ë±ìŠ¤ë¥¼ ì¶”ì í•˜ê¸° ìœ„í•´ ì´ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ê²ƒì´ë„¤.
2. `uint i = 0`ì—ì„œ ì‹œì‘í•´ì„œÂ `i < zombies.length`ê¹Œì§€ ì¦ê°€í•˜ëŠ”Â `for`Â ë°˜ë³µë¬¸ì„ ì„ ì–¸í•˜ê²Œ. ì´ ë°˜ë³µë¬¸ì—ì„œ ìš°ë¦¬ ë°°ì—´ì˜ ëª¨ë“  ì¢€ë¹„ì— ì ‘ê·¼í•  ê²ƒì´ë„¤.
3. `for`Â ë°˜ë³µë¬¸ ì•ˆì—ì„œ,Â `zombieToOwner[i]`ê°€Â `_owner`ì™€ ê°™ì€ì§€ í™•ì¸í•˜ëŠ”Â `if`Â ë¬¸ì¥ì„ ë§Œë“¤ê²Œ. ì´ ë¬¸ì¥ì€ ë‘ ê°œì˜ ì£¼ì†Œê°’ì´ ê°™ì€ì§€ ë¹„êµí•˜ëŠ” ê²ƒì´ë„¤.
4. `if`Â ë¬¸ì¥ ì•ˆì—ì„œ:
    1. `result[counter]`ì—Â `i`ë¥¼ ëŒ€ì…í•´ì„œÂ `result`Â ë°°ì—´ì— ì¢€ë¹„ì˜ IDë¥¼ ì¶”ê°€í•˜ê²Œ.
    2. `counter`ë¥¼ 1 ì¦ê°€ì‹œí‚¤ê²Œ(ìœ„ì˜Â `for`Â ë°˜ë³µë¬¸ ì˜ˆì‹œë¥¼ ì°¸ê³ í•˜ê²Œ).

ì´ê²Œ ëì´ë¼ë„¤ - ì´ í•¨ìˆ˜ëŠ” ì´ì œÂ `_owner`ê°€ ì†Œìœ í•œ ëª¨ë“  ì¢€ë¹„ë¥¼ ê°€ìŠ¤ë¥¼ ì†Œëª¨í•˜ì§€ ì•Šê³  ë°˜í™˜í•˜ê²Œ ë  ê²ƒì´ë„¤.

</aside>

![image](https://github.com/naryeong-ko/TIL/assets/99406992/4c79bbf8-a3cb-4a88-b0c9-2423247ca945)

![image](https://github.com/naryeong-ko/TIL/assets/99406992/e94fc108-29eb-48a7-b630-150d07983610)


